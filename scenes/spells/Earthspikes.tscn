[gd_scene load_steps=10 format=3 uid="uid://blj55wda58nef"]

[ext_resource type="PackedScene" uid="uid://bqfixw2lgxqrb" path="res://scenes/spells/spike.tscn" id="1_cwo5w"]
[ext_resource type="Script" path="res://scripts/spells/Earthspikes.gd" id="1_su7ol"]

[sub_resource type="BoxShape3D" id="BoxShape3D_j0imq"]
size = Vector3(3, 2, 8)

[sub_resource type="Animation" id="Animation_h7ph1"]
resource_name = "Spikes"
length = 2.0
loop_mode = 1
tracks/0/type = "position_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Offset/Wave1")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0, -2, 0, 0.5, 1, 0, -2, 0, 1, 1, 0, -2, 0, 1.5, 1, 0, 0, 0, 2, 1, 0, 0, 0)
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Offset/Wave2")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0, -2, -3.296, 0.5, 1, 0, -2, -3.296, 1, 1, 0, 0, -3.29614, 1.5, 1, 0, 0, -3.296, 2, 1, 0, 0, -3.29611)
tracks/2/type = "position_3d"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Offset/Wave3")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = PackedFloat32Array(0, 1, 0, -2, -6.627, 0.5, 1, 0, 0, -6.62701, 1, 1, 0, 0, -6.627, 1.5, 1, 0, 0, -6.627, 2, 1, 0, 0, -6.62701)
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Offset/Particles1:emitting")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.3),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Offset/Particles2:emitting")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.8),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Offset/Particles3:emitting")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(1.3),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_a1g0r"]
_data = {
"Spikes": SubResource("Animation_h7ph1")
}

[sub_resource type="FogMaterial" id="FogMaterial_mqrrb"]
density = 0.3
albedo = Color(0.686275, 0.337255, 0.0509804, 1)
emission = Color(0.462745, 0.321569, 0.054902, 1)
height_falloff = 1.10957e-05
edge_fade = 0.0329877

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_o4jpr"]
emission_shape = 3
emission_box_extents = Vector3(1, 1, 1)
direction = Vector3(0, 1, 0.3)
spread = 30.0
initial_velocity_min = 2.0
initial_velocity_max = 5.0
gravity = Vector3(0, -9, 0)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_irnrs"]
albedo_color = Color(0.498039, 0.392157, 0.121569, 1)

[sub_resource type="SphereMesh" id="SphereMesh_bc6xg"]
material = SubResource("StandardMaterial3D_irnrs")
radius = 0.02
height = 0.1

[node name="Earthspikes" type="Node3D"]
script = ExtResource("1_su7ol")

[node name="Offset" type="Area3D" parent="."]
transform = Transform3D(1.2, 0, 0, 0, 1.2, 0, 0, 0, 1.2, 0, 0, 0.5)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 4)
shape = SubResource("BoxShape3D_j0imq")

[node name="Wave1" type="Node3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.478514, 0)

[node name="spike1" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.973535, 0.0478657, -0.223471, -0.0743348, 0.990972, -0.111576, 0.216113, 0.125234, 0.968304, -1.32871, -0.556915, 7.30241)

[node name="spike2" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.965045, -0.178002, -0.192364, 0.113021, 0.944868, -0.307328, 0.236463, 0.274844, 0.931958, 0.0803514, -0.861684, 6.87471)

[node name="spike3" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, 0, 0.963163, -0.26892, -0.188118, 0.264119, 0.945967, 1.01089, -0.240939, 6.71541)

[node name="spike4" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.922456, -0.263797, 0.281934, 0.244098, 0.96421, 0.10352, -0.299152, -0.0266734, 0.953833, -0.424637, -1.02633, 6.55271)

[node name="spike5" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, -0.0459272, 0.998499, -0.0298343, -0.182426, 0.0209802, 0.982996, -0.651481, -0.673264, 5.5629)

[node name="spike6" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, -0.0111992, 0.977178, -0.212127, -0.187785, 0.20631, 0.960298, 1.0967, -0.751152, 5.16344)

[node name="spike7" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, 0, 0.963163, -0.26892, -0.188118, 0.264119, 0.945967, 0.252961, -0.344242, 5.99958)

[node name="spike8" parent="Offset/Wave1" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.948325, -0.201737, 0.244913, 0.255523, 0.943156, -0.21252, -0.188118, 0.264119, 0.945967, -0.832366, -0.147883, 4.6302)

[node name="Wave2" type="Node3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -3.29603)

[node name="spike1" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.973535, 0.0478657, -0.223471, -0.0743348, 0.990972, -0.111576, 0.216113, 0.125234, 0.968304, 0.189592, -0.556915, 7.30241)

[node name="spike2" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.965045, -0.178002, -0.192364, 0.113021, 0.944868, -0.307328, 0.236463, 0.274844, 0.931958, 0.0803514, -0.861684, 6.87471)

[node name="spike3" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, 0, 0.963163, -0.26892, -0.188118, 0.264119, 0.945967, 1.01089, -0.240939, 6.71541)

[node name="spike4" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.254179, -0.166632, 0.952695, 0.244098, 0.96421, 0.10352, -0.935847, 0.206238, 0.285756, -0.424637, -1.02633, 6.16863)

[node name="spike5" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, -0.0459272, 0.998499, -0.0298343, -0.182426, 0.0209802, 0.982996, -0.651481, -0.673264, 5.5629)

[node name="spike6" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, -0.0111992, 0.977178, -0.212127, -0.187785, 0.20631, 0.960298, 0.141794, -0.751152, 5.9074)

[node name="spike7" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, 0, 0.963163, -0.26892, -0.188118, 0.264119, 0.945967, -1.06529, -0.344242, 7.01671)

[node name="spike8" parent="Offset/Wave2" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.948325, -0.201737, 0.244913, 0.255523, 0.943156, -0.21252, -0.188118, 0.264119, 0.945967, 0.340581, -0.147883, 8.32518)

[node name="Wave3" type="Node3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -6.627)

[node name="spike1" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.973535, 0.0478657, -0.223471, -0.0743348, 0.990972, -0.111576, 0.216113, 0.125234, 0.968304, 0.189592, -0.556915, 7.30241)

[node name="spike2" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.965045, -0.178002, -0.192364, 0.113021, 0.944868, -0.307328, 0.236463, 0.274844, 0.931958, 0.0803514, -0.861684, 6.87471)

[node name="spike3" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, 0, 0.963163, -0.26892, -0.188118, 0.264119, 0.945967, 1.01089, -0.240939, 7.26385)

[node name="spike4" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.955225, -0.220661, -0.197112, 0.244098, 0.96421, 0.10352, 0.167214, -0.147, 0.9749, -0.202522, -1.02633, 8.5827)

[node name="spike5" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, -0.0459272, 0.998499, -0.0298343, -0.182426, 0.0209802, 0.982996, 0.919511, -0.673264, 8.83871)

[node name="spike6" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, -0.0111992, 0.977178, -0.212127, -0.187785, 0.20631, 0.960298, -1.02016, -0.751152, 8.18772)

[node name="spike7" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.982146, 0.0505888, 0.181189, 0, 0.963163, -0.26892, -0.188118, 0.264119, 0.945967, -1.06529, -0.344242, 7.01671)

[node name="spike8" parent="Offset/Wave3" instance=ExtResource("1_cwo5w")]
transform = Transform3D(0.948325, -0.201737, 0.244913, 0.255523, 0.943156, -0.21252, -0.188118, 0.264119, 0.945967, 0.340581, -0.147883, 8.32518)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Offset"]
root_node = NodePath("../..")
libraries = {
"": SubResource("AnimationLibrary_a1g0r")
}

[node name="FogVolume" type="FogVolume" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0182246, 0, 4.57007)
size = Vector3(4.50023, 2.08051, 10.4086)
material = SubResource("FogMaterial_mqrrb")

[node name="Particles1" type="GPUParticles3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0212209, 0.801142)
emitting = false
amount = 100
lifetime = 0.7
one_shot = true
fixed_fps = 60
visibility_aabb = AABB(-4, -4.29736, -4, 8, 8, 8)
process_material = SubResource("ParticleProcessMaterial_o4jpr")
draw_pass_1 = SubResource("SphereMesh_bc6xg")

[node name="Particles2" type="GPUParticles3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0212209, 3.95893)
emitting = false
amount = 100
lifetime = 0.7
one_shot = true
fixed_fps = 60
visibility_aabb = AABB(-4, -4.29736, -4, 8, 8, 8)
process_material = SubResource("ParticleProcessMaterial_o4jpr")
draw_pass_1 = SubResource("SphereMesh_bc6xg")

[node name="Particles3" type="GPUParticles3D" parent="Offset"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0212209, 6.63332)
emitting = false
amount = 100
lifetime = 0.7
one_shot = true
fixed_fps = 60
visibility_aabb = AABB(-4, -4.29736, -4, 8, 8, 8)
process_material = SubResource("ParticleProcessMaterial_o4jpr")
draw_pass_1 = SubResource("SphereMesh_bc6xg")

[connection signal="body_exited" from="Offset" to="." method="_on_body_exited"]
